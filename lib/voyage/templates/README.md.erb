# <%= app_name.humanize %>

## Getting Started

After you have cloned this repo, run this setup script to set up your machine
with the necessary dependencies to run and test this app:

    % ./bin/setup

It assumes you have a machine equipped with Ruby, Postgres, Redis, etc.

## Seeded Data

Assuming that devise was opted in to, a user and admin have been seeded for you:

    admin@example.com -> asdfjkl123
    user_1@example.com -> asdfjkl123


## Sortable collections in Administrate

Voyage supports drag and drop reordering of collections within Administrate. To enable
this for a resource, configure the following:

1. Add a `:position` column to the model with an `:integer` type.
2. Update the model's dashboard to include the `position` column as a `Field::Number`.
3. Within `app/controllers/admin/#{resources}_controller.rb`, add this include to add the `sort` action:
  `include DefaultSort`

If sorting is to be global across the entirety of the resource:
2. Add `acts_as_list` to the model file.

If sorting is to be within a containing list or relationship,
2. Add `acts_as_list scope: :assocation_name` to the model file replacing
  `:association_name` with the association to scope the ordering to.
3. On the parent association, update the `has_many` relationship to include
  a scope as follows: `-> { order(position ::asc) }`. This will ensure that
  returned children are sorted as intended.

## Static Pages

The HighVoltage gem is used.

## Authorization

This repo uses CanCanCan and Canard to authorize user action. `ApplicationController` defines the `check_authorization` method for non-devise non-high voltage controllers. If you want to skip authorization for a specific method in a controller, the following method can be used: `skip_authorization_check`

## Rubocop

Take a look at the `.rubocop.yml` file to see what styles are being enforced.

## Annotations

Model & spec files are automatically annotated each time `rake db:migrate` is run.

# Set Heroku Config Vars

    heroku config:set FORCE_SEED=1
    heroku config:set REDIS_URL=''
    heroku config:set SEGMENT_ANALYTICS_RUBY_KEY=''
    heroku config:set SMTP_ADDRESS=''
    heroku config:set SMTP_DOMAIN=''
    heroku config:set SMTP_PASSWORD=''
    heroku config:set SMTP_USERNAME=''
    heroku config:set APPLICATION_HOST='<%= app_name %>.headway.io'
